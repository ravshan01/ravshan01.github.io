window.onload=function(){document.querySelector(".preloader-wrap").style.display="none";let e=document.getElementById("canvas"),t=e.getContext("2d"),i=!1,n=!1;e.style.display="block",e.width=window.innerWidth,e.height=window.innerHeight,e.addEventListener("mousedown",d),e.addEventListener("touchstart",d),e.addEventListener("mouseup",u),e.addEventListener("touchend",u),e.addEventListener("mousemove",h),e.addEventListener("touchmove",h);let o,c,l="#ffffff",r="#000000",s=20,a=s/2;function d(){i=!0}function u(){i=!1,n||(S.push("mouseup"),t.beginPath())}function h(e){o=e.offsetX,c=e.offsetY,void 0===o&&(o=e.changedTouches[0].clientX,c=e.changedTouches[0].clientY),i&&!n&&(g(),S.push({offsetX:o,offsetY:c,color:l,lineWidth:s}))}function v(){t.clearRect(0,0,e.width,e.height),t.beginPath()}function g(){t.fillStyle=l,t.strokeStyle=l,t.lineWidth=s,a=s/2,t.lineTo(o,c),t.stroke(),t.beginPath(),t.arc(o,c,a,0,2*Math.PI),t.fill(),t.beginPath(),t.moveTo(o,c)}t.lineWidth=s,e.style.backgroundColor=r,v();let f=document.querySelector(".clear"),m=document.querySelector(".save"),y=document.querySelector(".replay"),S=[];f.addEventListener("click",(e=>{e.preventDefault(),v(),S=[]})),m.addEventListener("click",(e=>{e.preventDefault(),sessionStorage.setItem("background",r),sessionStorage.setItem("coords",JSON.stringify(S));let i=document.querySelector(".saved");i.style.visibility="visible",setTimeout((()=>i.style.visibility="hidden"),1200),t.beginPath()})),y.addEventListener("click",(i=>{i.preventDefault(),S=JSON.parse(sessionStorage.getItem("coords")),v(),e.style.backgroundColor=sessionStorage.getItem("background");let a=setInterval((()=>{if(n=!0,!S.length||1==S.length)return n=!1,clearInterval(a),void t.beginPath();{let e=S.shift();o=e.offsetX,c=e.offsetY,l=e.color,s=e.lineWidth,g()}r=sessionStorage.getItem("background"),D(),W(),C()}),25)}));let L=document.querySelector(".settings"),k=document.querySelector(".settings-wrap"),p=document.querySelector(".color-link"),b=document.querySelectorAll(".color-wrap .color li"),w=document.querySelectorAll(".color-wrap .color span"),E=document.querySelector(".background-link"),q=document.querySelectorAll(".background-wrap .background li"),x=document.querySelectorAll(".background-wrap .background span"),T=document.querySelector(".width-link"),I=document.querySelectorAll(".width li"),N=document.querySelectorAll(".width li span");function P(e){e.preventDefault(),this.nextElementSibling?this.nextElementSibling.classList.toggle("active-palit"):this.nextSibling.classList.toggle("active-palit"),this.childNodes[1].classList.toggle("rotate")}function A(e,t){e.style.background=w[t].innerText}function D(){let e=document.querySelector(".color-wrap .color li.active");e&&e.classList.remove("active"),b.forEach(((e,t)=>{l==w[t].innerText&&e.classList.add("active")}))}function W(){let e=document.querySelector(".background-wrap .background li.active");e&&e.classList.remove("active"),q.forEach(((e,t)=>{r==x[t].innerText&&e.classList.add("active")}))}function C(){let e=document.querySelector(".width li.active");e&&e.classList.remove("active"),I.forEach(((e,t)=>{s==N[t].innerText&&e.classList.add("active")}))}function X(){document.querySelector(".color-wrap .color li.active").classList.remove("active"),this.classList.add("active"),l=this.childNodes[0].innerText}function Y(){document.querySelector(".background-wrap .background li.active").classList.remove("active"),this.classList.add("active"),e.style.backgroundColor=this.childNodes[0].innerText,r=this.childNodes[0].innerText}function J(){document.querySelector(".width li.active").classList.remove("active"),this.classList.add("active"),s=this.childNodes[0].innerText}L.addEventListener("click",(e=>{e.preventDefault(),L.classList.toggle("settings-active"),k.classList.toggle("settings-wrap-active")})),p.addEventListener("click",P),E.addEventListener("click",P),T.addEventListener("click",P),b.forEach((function(e,t){A(e,t),e.addEventListener("click",X),D()})),q.forEach(((e,t)=>{A(e,t),e.addEventListener("click",Y),W()})),I.forEach(((e,t)=>{e.style.width=N[t].innerText+"px",e.style.height=N[t].innerText+"px",e.addEventListener("click",J),C()}))};